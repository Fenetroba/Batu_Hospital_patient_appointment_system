import{b as x,d as p,e as h,u as g,r as c,j as e,t as l,l as f}from"./index-DFaGKIYK.js";import{L as b}from"./Language-Dt_u_SWp.js";import"./select-1Q_tL9uR.js";const R=({user:w,isAuthenticated:v})=>{const d=x(),m=p(),{isLoading:n}=h(r=>r.auth),{t}=g(),[a,i]=c.useState({email:"",password:""}),[j,y]=c.useState(""),u=async r=>{if(r.preventDefault(),!a.email||!a.password){l.error("Please fill in all fields");return}try{const s=await d(f(a));if(s.meta.requestStatus==="fulfilled"&&s.payload?.success){l.success(s.payload.message||"Login successful!"),i({email:"",password:""});const o=s.payload.user?.role;console.log("User role after login:",o),s.payload.user&&localStorage.setItem("user",JSON.stringify(s.payload.user)),m({Admin:"/admin/home",Patient:"/patient/home",Doctor:"/doctor/home",Nurse:"/nurse/home",Receptionist:"/receptionist"}[o]||"/dashboard")}else{const o=s.payload?.message||s.error?.message||"Login failed";l.error(o)}}catch{l.error("An unexpected error occurred. Please try again.")}};return e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-1/2 flex flex-col justify-center items-center min-h-[40vh] md:h-[100vh] bg-[var(--six)] p-6 md:p-10",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white text-center mb-4",children:t("welcomeTitle")}),e.jsx("p",{className:"text-white text-center mb-6 md:mb-10",children:t("loginSubtitle")}),e.jsx(b,{})]}),e.jsx("div",{className:"w-full md:w-1/2 min-h-[60vh] md:h-[100vh] bg-[var(--two)] flex items-center justify-center p-6",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-[var(--six)] p-6 md:p-10 rounded-2xl w-full",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white text-center",children:t("loginTitle")}),e.jsx("p",{className:"text-white text-center mb-6 md:mb-10",children:t("loginSubtitle")}),e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"email",name:"email",placeholder:t("email"),value:a.email,onChange:r=>i({...a,email:r.target.value}),className:"border text-white bg-transparent border-gray-300 rounded-md p-2 md:p-3 focus:outline-none focus:ring-2 focus:ring-[var(--two)]",required:!0}),e.jsx("input",{type:"password",name:"password",placeholder:t("password"),value:a.password,onChange:r=>i({...a,password:r.target.value}),className:"border text-white bg-transparent border-gray-300 rounded-md p-2 md:p-3 focus:outline-none focus:ring-2 focus:ring-[var(--two)]",required:!0}),e.jsx("button",{type:"submit",disabled:n,className:"bg-[var(--one)] text-black font-bold p-2 md:p-3 rounded-md hover:bg-opacity-90 transition-colors disabled:opacity-50",children:n?`${t("login")}...`:t("login")})]}),e.jsx("p",{className:"text-white text-center mt-4",children:e.jsx("a",{href:"/location",className:"text-[var(--one)] hover:underline",children:t("register")})})]})})})]})};export{R as default};
