import{c as Se,j as e,x as Z,U as ae,S as Ee,e as k,r as x,X as ee,T as ne,G as De,H as fe,b as z,I as ds,J as T,K as Ue,N as Fe,O as W,Q as Te,V as us,k as Pe,m as Le,i as V,n as E,g as xs,h as $e,p as ms,o as hs,W as Be,Y as q,Z as gs,_ as ps,$ as fs,a0 as bs,a1 as de,a2 as js,a3 as vs,a4 as Oe,a5 as ys,a6 as Ns,a7 as ws,a8 as Cs,a9 as ks,aa as Ke,ab as Ss,ac as Ds,ad as As,f as Fs,ae as ue,af as be,ag as Ts,ah as Ms,ai as Is,aj as _s,C as Rs,ak as Es,al as Us,am as Ps,an as Ls,ao as $s,ap as Bs,aq as Os,ar as Ks,as as zs,at as Gs,au as Hs,av as qs,aw as Ws,ax as Vs,E as Ys,ay as Xs,az as Qs}from"./index-CZaaagKj.js";import{D as je,a as ve,b as ye,c as Ne,d as we,S as Js,R as Zs,L as ze,e as re}from"./LineChart-BnVxujuY.js";import{S as et}from"./stethoscope-B1OrHoRi.js";import{B as st}from"./building-2-C1_VuXxL.js";import{S as tt,b as at,d as nt,e as rt,f as lt,c as ot,u as Ge}from"./select-BjS8NVva.js";import{U as He}from"./users-CILFnGUU.js";import{t as oe,c as Ce,a as it,n as ct,g as dt,s as Me,f as U,i as le,P as ut,b as xt,C as mt,B as J,d as I,e as ht}from"./isWithinInterval-DL74kULn.js";import{R as P,C as B,X as O,Y as K,T as L,L as $}from"./CartesianChart-DM1P5l72.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],pt=Se("funnel",gt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qe=Se("user-check",ft);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],jt=Se("user-plus",bt);function Q({className:s,...t}){return e.jsx("div",{"data-slot":"skeleton",className:Z("bg-accent animate-pulse rounded-md",s),...t})}const vt=({currentUser:s,selectedRole:t,onRoleSelect:a})=>{const d=(()=>{if(!s)return[];switch(s.role){case"Admin":return[{id:"Doctor",label:"Doctor",icon:et,color:"bg-blue-500"},{id:"Nurse",label:"Nurse",icon:qe,color:"bg-green-500"},{id:"Receptionist",label:"Receptionist",icon:st,color:"bg-orange-500"},{id:"Admin",label:"Admin",icon:Ee,color:"bg-purple-500"}];case"Receptionist":return[{id:"Patient",label:"Patient",icon:ae,color:"bg-purple-500"}];default:return[]}})();return d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-white/70",children:"No roles available for your user type"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Select User Role"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:d.map(c=>{const m=c.icon;return e.jsxs("button",{type:"button",onClick:()=>a(c.id),className:`p-4 rounded-lg border-2 transition-all duration-200 flex flex-col items-center gap-2 ${t===c.id?`${c.color} border-white text-white shadow-lg scale-105`:"border-white/30 text-white/70 hover:border-white/50 hover:text-white hover:bg-white/10"}`,children:[e.jsx(m,{size:24}),e.jsx("span",{className:"font-medium",children:c.label})]},c.id)})})]})},yt=({formData:s,onChange:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",name:"fullName",value:s.fullName,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Password *"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Ba@1234",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter full address"})]})]}),Nt=({formData:s,onChange:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Medical Information (Patient)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Gender *"}),e.jsxs("select",{name:"gender",value:s.gender,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white bg-[var(--three)] border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Age *"}),e.jsx("input",{type:"number",name:"age",value:s.age,onChange:t,required:!0,min:"1",max:"150",className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter age"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Blood Group *"}),e.jsxs("select",{name:"bloodGroup",value:s.bloodGroup,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white bg-[var(--three)] border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Blood Group"}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"AB-",children:"AB-"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"O-",children:"O-"})]})]})]})]}),wt=["General","Cardiology","Neurology","Pediatrics","Orthopedics","Dermatology"],Ct=({formData:s,onChange:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Doctor Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Speciality *"}),e.jsxs(tt,{value:s.speciality,onValueChange:a=>t({target:{name:"speciality",value:a}}),children:[e.jsx(at,{className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",children:e.jsx(nt,{placeholder:"Select speciality"})}),e.jsx(rt,{children:wt.map(a=>e.jsx(lt,{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Doctor License Number *"}),e.jsx("input",{type:"text",name:"doctorLicense",value:s.doctorLicense,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter license number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Years of Experience *"}),e.jsx("input",{type:"number",name:"experience",value:s.experience,onChange:t,required:!0,min:"0",className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter years of experience"})]})]}),kt=({formData:s,onChange:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Nurse Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Nurse License Number *"}),e.jsx("input",{type:"text",name:"nurseLicense",value:s.nurseLicense,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter license number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Work Shift *"}),e.jsxs("select",{name:"shift",value:s.shift,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white bg-[var(--three)] border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Shift"}),e.jsx("option",{value:"Morning",children:"Morning (8 AM - 4 PM)"}),e.jsx("option",{value:"Evening",children:"Evening (4 PM - 12 AM)"}),e.jsx("option",{value:"Night",children:"Night (12 AM - 8 AM)"}),e.jsx("option",{value:"Rotating",children:"Rotating"})]})]})]})]}),St=({formData:s,onChange:t})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Receptionist Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Department *"}),e.jsx("input",{type:"text",name:"department",value:s.department,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"e.g., Front Desk, Emergency"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Working Hours *"}),e.jsxs("select",{name:"workingHours",value:s.workingHours,onChange:t,required:!0,className:"w-full px-4 py-3 border text-white bg-[var(--three)] border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Hours"}),e.jsx("option",{value:"Full-time",children:"Full-time (40 hours/week)"}),e.jsx("option",{value:"Part-time",children:"Part-time (20-30 hours/week)"}),e.jsx("option",{value:"Flexible",children:"Flexible Schedule"})]})]})]})]}),Dt=({onClose:s,onSubmit:t})=>{const{currentUser:a}=k(i=>i.user),[n,d]=x.useState(""),[c,m]=x.useState({fullName:"",email:"",role:"",password:"Ba@12345",gender:"",age:"",bloodGroup:"",address:"",phone:"",speciality:"",profileImage:"",doctorLicense:"",experience:"",nurseLicense:"",shift:"",department:"",workingHours:""}),h=i=>{d(i),m({...c,role:i,gender:i==="Patient"?c.gender:"",age:i==="Patient"?c.age:"",bloodGroup:i==="Patient"?c.bloodGroup:"",speciality:i==="Doctor"?c.speciality:"",doctorLicense:i==="Doctor"?c.doctorLicense:"",experience:i==="Doctor"?c.experience:"",nurseLicense:i==="Nurse"?c.nurseLicense:"",shift:i==="Nurse"?c.shift:"",department:i==="Receptionist"?c.department:"",workingHours:i==="Receptionist"?c.workingHours:""})},g=i=>{m({...c,[i.target.name]:i.target.value})},p=i=>{i.preventDefault();const o={...c};n!=="Doctor"&&(delete o.doctorLicense,delete o.experience),n!=="Nurse"&&(delete o.nurseLicense,delete o.shift),n!=="Receptionist"&&(delete o.department,delete o.workingHours),t(o),s()};return e.jsx("div",{className:"fixed inset-0 backdrop-blur-lg bg-opacity-20 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[var(--six)] rounded-xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create New User"}),e.jsx("button",{onClick:s,className:"text-white hover:text-gray-300 transition-colors p-2 rounded-full hover:bg-white/10",children:e.jsx(ee,{size:24})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsx(vt,{currentUser:a,selectedRole:n,onRoleSelect:h}),e.jsx(yt,{formData:c,onChange:g}),n==="Patient"&&e.jsx(Nt,{formData:c,onChange:g}),n==="Doctor"&&e.jsx(Ct,{formData:c,onChange:g}),n==="Nurse"&&e.jsx(kt,{formData:c,onChange:g}),n==="Receptionist"&&e.jsx(St,{formData:c,onChange:g}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Additional Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Profile Image URL (Optional)"}),e.jsx("input",{type:"url",name:"profileImage",value:c.profileImage,onChange:g,className:"w-full px-4 py-3 border text-white border-[var(--one)] rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white/10 backdrop-blur-sm",placeholder:"Enter profile image URL"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-white/20",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 font-medium shadow-lg",children:"Create User"}),e.jsx("button",{type:"button",onClick:s,className:"flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"Cancel"})]})]})]})})},At=({onClose:s,users:t,onDelete:a})=>{const[n,d]=x.useState([]),[c,m]=x.useState(""),h=t.filter(l=>l.name&&l.name.toLowerCase().includes(c.toLowerCase())||l.email&&l.email.toLowerCase().includes(c.toLowerCase())),g=l=>{d(b=>b.includes(l)?b.filter(v=>v!==l):[...b,l])},[p,i]=x.useState(!1),o=()=>{i(!0)},j=async()=>{await a(n),i(!1),s()},r=l=>({Doctor:"bg-blue-100 text-blue-700",Nurse:"bg-green-100 text-green-700",Patient:"bg-purple-100 text-purple-700",Admin:"bg-orange-100 text-orange-700"})[l]||"bg-gray-100 text-gray-700",u=()=>{const l=n.map(b=>{const v=t.find(y=>y._id===b);return v?.fullName||v?.email||"User"});return l.length===1?l[0]:l.length===2?`${l[0]} and ${l[1]}`:`${l[0]}, ${l[1]}, and ${l.length-2} others`};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsx(je,{open:p,onOpenChange:i,children:e.jsxs(ve,{className:"sm:max-w-[425px]",children:[e.jsxs(ye,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ne,{className:"h-5 w-5"}),e.jsx(Ne,{children:"Confirm Deletion"})]}),e.jsx(we,{className:"pt-2",children:n.length===1?e.jsxs("span",{children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium text-foreground",children:u()}),"? This action cannot be undone."]}):e.jsxs("span",{children:["Are you sure you want to delete these ",e.jsxs("span",{className:"font-medium text-foreground",children:[n.length," users"]}),"? This action cannot be undone."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Delete Users"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ee,{size:20})})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search users...",value:c,onChange:l=>m(l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:h.map(l=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${n.includes(l._id)?"border-red-500 bg-red-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>g(l._id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n.includes(l._id),onChange:()=>g(l._id),className:"w-4 h-4 text-red-600",onClick:b=>b.stopPropagation()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:l.name}),e.jsx("p",{className:"text-sm text-gray-600",children:l.email})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r(l.role)}`,children:l.role})})]})},l._id))})}),n.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700 mb-2",children:[e.jsx(ne,{size:16}),e.jsxs("span",{className:"font-medium",children:["Delete ",n.length," user",n.length>1?"s":"","?"]})]}),e.jsx("p",{className:"text-sm text-red-600 mb-3",children:"This action cannot be undone. The selected users will be permanently deleted."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:o,className:"flex-1 bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(De,{size:16}),"Delete Selected"]}),e.jsx("button",{onClick:()=>d([]),className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Clear Selection"})]})]}),e.jsx("div",{className:"flex gap-3 mt-4",children:e.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})})]})]})},Ft=({onClose:s,users:t,onSelectUser:a})=>{const[n,d]=x.useState(""),[c,m]=x.useState("All"),[h,g]=x.useState("All"),p=t.filter(r=>{const u=(r.name?.toLowerCase()||"").includes(n.toLowerCase())||(r.email?.toLowerCase()||"").includes(n.toLowerCase()),l=c==="All"||r.role===c,b=h==="All"||r.status===h;return u&&l&&b}),i=r=>({Doctor:"bg-blue-100 text-blue-700",Nurse:"bg-green-100 text-green-700",Patient:"bg-purple-100 text-purple-700",Admin:"bg-orange-100 text-orange-700"})[r]||"bg-gray-100 text-gray-700",o=r=>r==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",j=()=>{d(""),m("All"),g("All")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Find Users"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ee,{size:20})})]}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(fe,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:r=>d(r.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pt,{size:16,className:"text-gray-500"}),e.jsxs("select",{value:c,onChange:r=>m(r.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"All",children:"All Roles"}),e.jsx("option",{value:"Patient",children:"Patient"}),e.jsx("option",{value:"Doctor",children:"Doctor"}),e.jsx("option",{value:"Nurse",children:"Nurse"}),e.jsx("option",{value:"Admin",children:"Admin"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:h,onChange:r=>g(r.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"All",children:"All Status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]})}),e.jsx("button",{onClick:j,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Filters"})]})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",p.length," of ",t.length," users"]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"space-y-2",children:p.map(r=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>a&&a(r),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:r.name?.split(" ").map(u=>u[0]).join("").toUpperCase()||"N/A"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:r.name||r.fullName||"No Name"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.email}),e.jsx("p",{className:"text-sm text-gray-600",children:r.phone}),e.jsx("p",{className:"text-sm text-gray-600",children:r.address}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Age: ",r.age||"N/A"," | Gender: ",r.gender||"N/A"," | Blood: ",r.bloodGroup||"N/A"]}),r.speciality&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Speciality: ",r.speciality]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${i(r.role)}`,children:r.role}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${o(r.status)}`,children:r.status})]})]})},r.id))}),p.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(fe,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No users found matching your criteria."})]})]}),e.jsx("div",{className:"flex gap-3 mt-4",children:e.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})})]})})},Tt=({userId:s,onStatusUpdate:t})=>{const[a,n]=x.useState(!1),[d,c]=x.useState(!0),m=z(),{users:h}=k(p=>p.user);x.useEffect(()=>{(async()=>{if(!s){c(!1);return}try{const i=h?.find(o=>o._id===s);if(i)n(i.isActive||i.status==="Active");else{const o=await m(ds(s)).unwrap();o?.user&&n(o.user.isActive||o.user.status==="Active")}}catch(i){console.error("Failed to fetch user status:",i),T.error("Failed to load user status")}finally{c(!1)}})()},[s,h,m]);const g=async p=>{if(!s){T.error("User ID is missing");return}c(!0);try{const i=await m(Ue({id:s,userData:{isActive:p}})).unwrap();i?.success?(n(p),t&&t(p),T.success("User status updated successfully")):(n(!p),T.error(i?.message||"Failed to update status"))}catch(i){n(!p),T.error(i?.message||"An error occurred while updating status"),console.error("Update status error:",i)}finally{c(!1)}};return e.jsx("div",{className:"flex items-center space-x-2 ",children:e.jsx(Js,{checked:a,onCheckedChange:g,disabled:!s||d,className:"cursor-pointer"})})},Mt=()=>{const s=z(),{users:t,loading:a,error:n}=k(f=>f.user),{currentUser:d}=k(f=>f.auth),[c,m]=x.useState(!1),[h,g]=x.useState(!1),[p,i]=x.useState(!1),[o,j]=x.useState(!1),[r,u]=x.useState(!1),[l,b]=x.useState([]),[v,y]=x.useState(!1),[N,A]=x.useState(null);x.useEffect(()=>{s(Fe({role:"Admin"}))},[s]);const _=f=>{s(Fe({role:f}))};x.useEffect(()=>{s(W())},[s]);const R=(t||[]).filter(f=>f.role!=="Patient"),Y=[{label:"Total Users",value:R.length.toString(),icon:He,color:"bg-blue-500"},{label:"Active Users",value:R.filter(f=>f.isActive===!0).length.toString(),icon:qe,color:"bg-green-500"},{label:"Admins",value:R.filter(f=>f.role==="Admin").length.toString(),icon:Ee,color:"bg-orange-500"}],C=f=>({Doctor:"bg-blue-100 text-blue-700",Nurse:"bg-green-100 text-green-700",Patient:"bg-purple-100 text-purple-700",Admin:"bg-orange-100 text-orange-700"})[f]||"bg-gray-100 text-gray-700",D=f=>{s(us(f)),m(!1)},S=f=>{if(!f||!Array.isArray(f)||f.length===0){T.error("No users selected for deletion");return}b(f),j(!0)},F=async()=>{if(!l.length)return;const f=[...l];j(!1),y(!0);try{const w=T.loading("Deleting user(s)..."),M=await Promise.allSettled(f.map(X=>s(Te(X)).unwrap())),G=M.filter(X=>X.status==="fulfilled"),H=M.filter(X=>X.status==="rejected");G.length>0&&(await s(W()),T.success(G.length===1?"User deleted successfully":`${G.length} users deleted successfully`)),H.length>0&&(console.error("Failed to delete some users:",H),T.error(H.length===1?"Failed to delete 1 user. Please try again.":`Failed to delete ${H.length} users. Please try again.`)),g(!1)}catch(w){console.error("Error in confirmDeleteUsers:",w),T.error(w?.message||"An error occurred while deleting users")}finally{y(!1),b([]),T.dismiss()}},te=f=>{console.log("Selected user:",f),i(!1)},ce=f=>{const w=f.map(M=>{const G=t.find(H=>H._id===M);return G?.fullName||G?.email||"User"});return w.length===1?w[0]:w.length===2?`${w[0]} and ${w[1]}`:`${w[0]}, ${w[1]}, and ${w.length-2} others`};return e.jsxs("div",{className:"p-6",children:[e.jsx(je,{open:r,onOpenChange:u,children:e.jsxs(ve,{className:"sm:max-w-[425px]",children:[e.jsxs(ye,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ne,{className:"h-5 w-5"}),e.jsx(Ne,{children:"Confirm Deletion"})]}),e.jsxs(we,{className:"pt-2",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium text-foreground",children:N?.name||"this user"}),"? This action cannot be undone."]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>u(!1),disabled:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(N){y(!0);try{if((await s(Te(N._id)).unwrap())?.id)T.success("User deleted successfully"),await s(W());else throw new Error("Unexpected response from server")}catch(f){console.error("Failed to delete user:",f),f?.message?.includes("successfully")||T.error(f.message||"Failed to delete user")}finally{y(!1),u(!1),A(null)}}},disabled:v,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 flex items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})}),e.jsx(je,{open:o,onOpenChange:j,children:e.jsxs(ve,{className:"sm:max-w-[425px]",children:[e.jsxs(ye,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ne,{className:"h-5 w-5"}),e.jsx(Ne,{children:"Confirm Deletion"})]}),e.jsx(we,{className:"pt-2",children:l.length===1?e.jsxs("span",{children:["Are you sure you want to delete ",e.jsx("span",{className:"font-medium text-foreground",children:ce(l)}),"? This action cannot be undone."]}):e.jsxs("span",{children:["Are you sure you want to delete these ",e.jsxs("span",{className:"font-medium text-foreground",children:[l.length," users"]}),"? This action cannot be undone."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>j(!1),disabled:v,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:v,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 flex items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-[var(--six)]",children:"Users Management"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current Role:"}),e.jsx("div",{className:"flex gap-1",children:e.jsx("button",{onClick:()=>_("Admin"),className:`px-3 py-1 text-xs rounded-full transition-colors ${d?.role==="Admin"?"bg-purple-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Admin"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:Y.map(f=>e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${f.color} p-2 rounded-lg`,children:e.jsx(f.icon,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:f.label}),e.jsx("p",{className:"text-xl font-bold",children:f.value})]})]})},f.label))}),e.jsxs("div",{className:"bg-[var(--one)] text-white rounded-lg shadow ",children:[e.jsxs("div",{className:"p-4 bg-[var(--six)] border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold ",children:"All Users"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(fe,{size:16}),e.jsx("span",{children:"Find"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(jt,{size:16}),e.jsx("span",{children:"Add User"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:t.filter(f=>f.role!=="Patient"&&f._id!==d.id).map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-800",children:f.fullName}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:f.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C(f.role)}`,children:f.role})}),e.jsx("td",{className:"px-6 py-4 ",children:e.jsx(Tt,{userId:f._id,isActive:f.status==="Active",onStatusUpdate:w=>{s(Ue({...f,status:w?"Active":"Inactive"}))}})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Zs,{userId:f._id}),e.jsx("button",{className:"p-1 text-red-500 hover:text-red-700",onClick:w=>{w.stopPropagation(),A(f),u(!0)},disabled:a,title:"Delete user",children:e.jsx(De,{className:"h-5 w-5"})})]})})]},f._id))})]})})]}),c&&e.jsx(Dt,{onClose:()=>m(!1),onSubmit:D}),h&&e.jsx(At,{onClose:()=>g(!1),users:t,onDelete:S}),p&&e.jsx(Ft,{onClose:()=>i(!1),users:t,onSelectUser:te})]})};function It(s,t,a){const n=oe(s,a?.in);if(isNaN(t))return Ce(s,NaN);if(!t)return n;const d=n.getDate(),c=Ce(s,n.getTime());c.setMonth(n.getMonth()+t+1,0);const m=c.getDate();return d>=m?c:(n.setFullYear(c.getFullYear(),c.getMonth(),d),n)}function _t(s,t,a){return it(s,t*7,a)}function Rt(s,t){const a=oe(s,t?.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function Et(s,t){const[a,n]=ct(s,t.start,t.end);return{start:a,end:n}}function We(s,t){const{start:a,end:n}=Et(t?.in,s);let d=+a>+n;const c=d?+a:+n,m=d?n:a;m.setHours(0,0,0,0);let h=1;const g=[];for(;+m<=c;)g.push(Ce(a,m)),m.setDate(m.getDate()+h),m.setHours(0,0,0,0);return d?g.reverse():g}function Ut(s,t){const a=oe(s,t?.in);return a.setDate(1),a.setHours(0,0,0,0),a}function Ie(s,t){const a=dt(),n=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,d=oe(s,t?.in),c=d.getDay(),m=(c<n?-7:0)+6-(c-n);return d.setDate(d.getDate()+m),d.setHours(23,59,59,999),d}function Pt(s,t,a){return It(s,-t,a)}function _e(s,t,a){return _t(s,-t,a)}var xe="rovingFocusGroup.onEntryFocus",Lt={bubbles:!1,cancelable:!0},se="RovingFocusGroup",[ke,Ve,$t]=ot(se),[Bt,Ye]=Pe(se,[$t]),[Ot,Kt]=Bt(se),Xe=x.forwardRef((s,t)=>e.jsx(ke.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(ke.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(zt,{...s,ref:t})})}));Xe.displayName=se;var zt=x.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:a,orientation:n,loop:d=!1,dir:c,currentTabStopId:m,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:g,onEntryFocus:p,preventScrollOnEntryFocus:i=!1,...o}=s,j=x.useRef(null),r=xs(t,j),u=Ge(c),[l,b]=$e({prop:m,defaultProp:h??null,onChange:g,caller:se}),[v,y]=x.useState(!1),N=ms(p),A=Ve(a),_=x.useRef(!1),[R,Y]=x.useState(0);return x.useEffect(()=>{const C=j.current;if(C)return C.addEventListener(xe,N),()=>C.removeEventListener(xe,N)},[N]),e.jsx(Ot,{scope:a,orientation:n,dir:u,loop:d,currentTabStopId:l,onItemFocus:x.useCallback(C=>b(C),[b]),onItemShiftTab:x.useCallback(()=>y(!0),[]),onFocusableItemAdd:x.useCallback(()=>Y(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>Y(C=>C-1),[]),children:e.jsx(V.div,{tabIndex:v||R===0?-1:0,"data-orientation":n,...o,ref:r,style:{outline:"none",...s.style},onMouseDown:E(s.onMouseDown,()=>{_.current=!0}),onFocus:E(s.onFocus,C=>{const D=!_.current;if(C.target===C.currentTarget&&D&&!v){const S=new CustomEvent(xe,Lt);if(C.currentTarget.dispatchEvent(S),!S.defaultPrevented){const F=A().filter(M=>M.focusable),te=F.find(M=>M.active),ce=F.find(M=>M.id===l),w=[te,ce,...F].filter(Boolean).map(M=>M.ref.current);Ze(w,i)}}_.current=!1}),onBlur:E(s.onBlur,()=>y(!1))})})}),Qe="RovingFocusGroupItem",Je=x.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:a,focusable:n=!0,active:d=!1,tabStopId:c,children:m,...h}=s,g=Le(),p=c||g,i=Kt(Qe,a),o=i.currentTabStopId===p,j=Ve(a),{onFocusableItemAdd:r,onFocusableItemRemove:u,currentTabStopId:l}=i;return x.useEffect(()=>{if(n)return r(),()=>u()},[n,r,u]),e.jsx(ke.ItemSlot,{scope:a,id:p,focusable:n,active:d,children:e.jsx(V.span,{tabIndex:o?0:-1,"data-orientation":i.orientation,...h,ref:t,onMouseDown:E(s.onMouseDown,b=>{n?i.onItemFocus(p):b.preventDefault()}),onFocus:E(s.onFocus,()=>i.onItemFocus(p)),onKeyDown:E(s.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){i.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=qt(b,i.orientation,i.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let N=j().filter(A=>A.focusable).map(A=>A.ref.current);if(v==="last")N.reverse();else if(v==="prev"||v==="next"){v==="prev"&&N.reverse();const A=N.indexOf(b.currentTarget);N=i.loop?Wt(N,A+1):N.slice(A+1)}setTimeout(()=>Ze(N))}}),children:typeof m=="function"?m({isCurrentTabStop:o,hasTabStop:l!=null}):m})})});Je.displayName=Qe;var Gt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ht(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function qt(s,t,a){const n=Ht(s.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Gt[n]}function Ze(s,t=!1){const a=document.activeElement;for(const n of s)if(n===a||(n.focus({preventScroll:t}),document.activeElement!==a))return}function Wt(s,t){return s.map((a,n)=>s[(t+n)%s.length])}var Vt=Xe,Yt=Je,ie="Tabs",[Xt]=Pe(ie,[Ye]),es=Ye(),[Qt,Ae]=Xt(ie),ss=x.forwardRef((s,t)=>{const{__scopeTabs:a,value:n,onValueChange:d,defaultValue:c,orientation:m="horizontal",dir:h,activationMode:g="automatic",...p}=s,i=Ge(h),[o,j]=$e({prop:n,onChange:d,defaultProp:c??"",caller:ie});return e.jsx(Qt,{scope:a,baseId:Le(),value:o,onValueChange:j,orientation:m,dir:i,activationMode:g,children:e.jsx(V.div,{dir:i,"data-orientation":m,...p,ref:t})})});ss.displayName=ie;var ts="TabsList",as=x.forwardRef((s,t)=>{const{__scopeTabs:a,loop:n=!0,...d}=s,c=Ae(ts,a),m=es(a);return e.jsx(Vt,{asChild:!0,...m,orientation:c.orientation,dir:c.dir,loop:n,children:e.jsx(V.div,{role:"tablist","aria-orientation":c.orientation,...d,ref:t})})});as.displayName=ts;var ns="TabsTrigger",rs=x.forwardRef((s,t)=>{const{__scopeTabs:a,value:n,disabled:d=!1,...c}=s,m=Ae(ns,a),h=es(a),g=is(m.baseId,n),p=cs(m.baseId,n),i=n===m.value;return e.jsx(Yt,{asChild:!0,...h,focusable:!d,active:i,children:e.jsx(V.button,{type:"button",role:"tab","aria-selected":i,"aria-controls":p,"data-state":i?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:g,...c,ref:t,onMouseDown:E(s.onMouseDown,o=>{!d&&o.button===0&&o.ctrlKey===!1?m.onValueChange(n):o.preventDefault()}),onKeyDown:E(s.onKeyDown,o=>{[" ","Enter"].includes(o.key)&&m.onValueChange(n)}),onFocus:E(s.onFocus,()=>{const o=m.activationMode!=="manual";!i&&!d&&o&&m.onValueChange(n)})})})});rs.displayName=ns;var ls="TabsContent",os=x.forwardRef((s,t)=>{const{__scopeTabs:a,value:n,forceMount:d,children:c,...m}=s,h=Ae(ls,a),g=is(h.baseId,n),p=cs(h.baseId,n),i=n===h.value,o=x.useRef(i);return x.useEffect(()=>{const j=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(j)},[]),e.jsx(hs,{present:d||i,children:({present:j})=>e.jsx(V.div,{"data-state":i?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":g,hidden:!j,id:p,tabIndex:0,...m,ref:t,style:{...s.style,animationDuration:o.current?"0s":void 0},children:j&&c})})});os.displayName=ls;function is(s,t){return`${s}-trigger-${t}`}function cs(s,t){return`${s}-content-${t}`}var Jt=ss,Zt=as,ea=rs,sa=os;function ta({className:s,...t}){return e.jsx(Jt,{"data-slot":"tabs",className:Z("flex flex-col gap-2",s),...t})}function aa({className:s,...t}){return e.jsx(Zt,{"data-slot":"tabs-list",className:Z("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function me({className:s,...t}){return e.jsx(ea,{"data-slot":"tabs-trigger",className:Z("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function he({className:s,...t}){return e.jsx(sa,{"data-slot":"tabs-content",className:Z("flex-1 outline-none",s),...t})}const na=()=>{const s=z(),{users:t,loading:a}=k(u=>u.user),{appointments:n,loading:d}=k(u=>u.appointments),[c,m]=x.useState("overview"),[h,g]=x.useState(4),[p,i]=x.useState({start:Me(_e(new Date,3)),end:Ie(new Date)});x.useEffect(()=>{s(W()),s(Be())},[s]);const o=x.useMemo(()=>{const u=[],l=new Date;for(let b=h-1;b>=0;b--){const v=Me(_e(l,b)),y=Ie(v),N=`${U(v,"MMM d")} - ${U(y,"MMM d, yyyy")}`,A=t.filter(D=>{const S=new Date(D.createdAt);return le(S,{start:v,end:y})}),_=n.filter(D=>{const S=new Date(D.date);return le(S,{start:v,end:y})}),R=_.reduce((D,S)=>(D[S.status]=(D[S.status]||0)+1,D),{}),C=We({start:v,end:y}).map(D=>{const S=_.filter(F=>new Date(F.date).toDateString()===D.toDateString());return{name:U(D,"EEE"),date:U(D,"yyyy-MM-dd"),appointments:S.length,completed:S.filter(F=>F.status==="completed").length,pending:S.filter(F=>F.status==="scheduled").length,cancelled:S.filter(F=>F.status==="cancelled").length}});u.push({name:N,weekStart:v,weekEnd:y,users:A.length,appointments:_.length,completed:R.completed||0,scheduled:R.scheduled||0,cancelled:R.cancelled||0,dailyData:C})}return u},[t,n,h]),j=x.useMemo(()=>{if(o.length===0)return[];const u=o.reduce((y,N)=>y+N.users,0),l=o.reduce((y,N)=>y+N.appointments,0),b=o.reduce((y,N)=>y+N.completed,0),v=o.reduce((y,N)=>y+N.scheduled,0);return[{name:"Total Users",value:u,change:0,icon:"ðŸ‘¥"},{name:"Total Appointments",value:l,change:0,icon:"ðŸ“…"},{name:"Completed",value:b,change:0,icon:"âœ…"},{name:"Pending",value:v,change:0,icon:"â³"}]},[o]);if(a||d)return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Reports"}),e.jsx(Q,{className:"h-10 w-32"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(u=>e.jsx(Q,{className:"h-32 rounded-lg"},u))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Q,{className:"h-80 rounded-lg"}),e.jsx(Q,{className:"h-80 rounded-lg"})]}),e.jsx(Q,{className:"h-96 rounded-lg"})]});const r=o[0]?.dailyData||[];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Weekly Reports"}),e.jsxs("p",{className:"text-muted-foreground",children:[U(p.start,"MMM d, yyyy")," - ",U(p.end,"MMM d, yyyy")]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{value:h,onChange:u=>g(Number(u.target.value)),className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:2,children:"Last 2 weeks"}),e.jsx("option",{value:4,children:"Last 4 weeks"}),e.jsx("option",{value:8,children:"Last 8 weeks"}),e.jsx("option",{value:12,children:"Last 12 weeks"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:j.map(u=>e.jsxs(q,{className:"shadow-sm bg-[var(--three)] text-white",children:[e.jsx(gs,{className:"pb-2",children:e.jsxs(ps,{className:"text-sm font-medium text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:u.icon}),u.name]})}),e.jsxs(fs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.value}),u.change!==void 0&&e.jsxs("div",{className:`text-sm ${u.change>=0?"text-green-500":"text-red-500"}`,children:[u.change>=0?"â†‘":"â†“"," ",Math.abs(u.change),"% from last period"]})]})]},u.name))}),e.jsxs(ta,{value:c,onValueChange:m,className:"space-y-4",children:[e.jsxs(aa,{className:"bg-[var(--six)] px-10 ",children:[e.jsx(me,{value:"overview",className:"text-[var(--three)] ",children:"Overview"}),e.jsx(me,{value:"appointments",className:"text-[var(--three)] ",children:"Appointments"}),e.jsx(me,{value:"users",className:"text-[var(--three)] ",children:"Users"})]}),e.jsxs(he,{value:"overview",className:"space-y-6",children:[e.jsxs(q,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Weekly Trends"}),e.jsx("div",{className:"h-80",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(ze,{data:o,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx(K,{}),e.jsx(L,{}),e.jsx($,{}),e.jsx(re,{type:"monotone",dataKey:"appointments",name:"Appointments",stroke:"#8884d8",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(re,{type:"monotone",dataKey:"users",name:"New Users",stroke:"#82ca9d",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(q,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Appointment Status (This Week)"}),e.jsx("div",{className:"h-64",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(ut,{children:[e.jsx(xt,{data:[{name:"Completed",value:o[0]?.completed||0},{name:"scheduled",value:o[0]?.scheduled||0},{name:"cancelled",value:o[0]?.cancelled||0}],cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:7,dataKey:"value",label:({name:u,percent:l})=>`${u} ${(l*100).toFixed(0)}%`,children:["#00C49F","#5e640cff","#ec1f1fff"].map((u,l)=>e.jsx(mt,{fill:u},`cell-${l}`))}),e.jsx(L,{formatter:u=>[`${u}  appointments`,"Count"]}),e.jsx($,{})]})})})]}),e.jsxs(q,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Daily Breakdown (This Week)"}),e.jsx("div",{className:"h-64",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(J,{data:r,children:[e.jsx(B,{strokeDasharray:"5 5"}),e.jsx(O,{dataKey:"name"}),e.jsx(K,{tickCount:1}),e.jsx(L,{formatter:u=>[`${u}  appointments`,"Count"]}),e.jsx($,{}),e.jsx(I,{dataKey:"appointments",name:"Appointments",fill:"#8884d8"}),e.jsx(I,{dataKey:"completed",name:"Completed",fill:"#00C49F"})]})})})]})]})]}),e.jsx(he,{value:"appointments",className:"space-y-6",children:e.jsxs(q,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Appointments by Status"}),e.jsx("div",{className:"h-96",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(J,{data:o,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx(K,{tickCount:1}),e.jsx(L,{}),e.jsx($,{}),e.jsx(I,{dataKey:"completed",name:"Completed",fill:"#00C49F"}),e.jsx(I,{dataKey:"scheduled",name:"scheduled",fill:"#FFBB28"}),e.jsx(I,{dataKey:"cancelled",name:"Cancelled",fill:"#FF8042"})]})})})]})}),e.jsx(he,{value:"users",className:"space-y-6",children:e.jsxs(q,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"New Users"}),e.jsx("div",{className:"h-96",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(J,{data:o,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx(K,{}),e.jsx(L,{}),e.jsx($,{}),e.jsx(I,{dataKey:"users",name:"New Users",fill:"#82ca9d"})]})})})]})})]})]})};let ge;const ra=s=>(ge||(ge=Ke("http://localhost:5000",{auth:{token:s},withCredentials:!0})),ge),la=({user:s})=>{const t=z(),{currentUser:a}=k(o=>o.auth),{messages:n,loading:d}=k(o=>o.messages),[c,m]=x.useState(""),[h,g]=x.useState(null),p=x.useRef(null);x.useEffect(()=>{if(!a)return;const o=localStorage.getItem("token"),j=ra(o);return j.on("new_message",r=>{const u=r.sender?._id||r.sender,l=r.receiver?._id||r.receiver;(u===s._id&&l===a.id||u===a.id&&l===s._id)&&(t(bs(r)),u===s._id&&t(de({from:s._id})))}),j.on("message_updated",r=>{t(js(r))}),j.on("messages_read",r=>{(r.fromUser===a.id||r.conversationId)&&t(de({from:a.id,isReadReceipt:!0}))}),()=>{j.off("new_message"),j.off("message_updated"),j.off("messages_read")}},[s,a,t]),x.useEffect(()=>{s&&s._id&&a?.id&&(t(vs({userA:a.id,userB:s._id})),t(de({from:s._id})),t(Oe(s._id)),g(null),m(""))},[s,a,t]),x.useEffect(()=>{m(h?h.content:"")},[h]),x.useEffect(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[n]);const i=()=>{const o=c.trim();if(o){if(h)Ss(t,h._id,o,g);else{if(!s?._id)return;t(Ds({receiver:s._id,content:o}))}m("")}};return e.jsxs("div",{className:"flex flex-col h-[70vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[d&&e.jsx("div",{className:"text-gray-300",children:"Loading..."}),n.map(o=>e.jsxs("div",{className:`max-w-[75%] px-3 py-2 rounded-md group relative ${o.sender?._id===a.id?"bg-blue-600 text-white ml-auto":"bg-gray-700 text-white"}`,children:[e.jsx("div",{className:"text-sm break-words",children:o.content||o.text}),e.jsxs("div",{className:`text-[10px] mt-1 flex items-center justify-end gap-1 ${o.sender?._id===a.id?"text-blue-200":"text-gray-400"}`,children:[e.jsx("span",{children:new Date(o.createdAt||o.sentAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),o.sender?._id===a.id&&(o.status==="read"?e.jsx(ys,{size:12,className:"text-white"}):e.jsx(Ns,{size:12,className:"text-white"}))]}),o.sender?._id===a.id&&e.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ws,{onEdit:()=>ks(g,o),onDelete:()=>Cs(t,o._id)})})]},o._id||o.id)),e.jsx("div",{ref:p})]}),e.jsxs("div",{className:"p-3 border-t border-[var(--four)] flex gap-2 items-center",children:[h&&e.jsx("button",{onClick:()=>g(null),className:"text-red-500 hover:bg-red-100 p-2 rounded-full",children:e.jsx(ee,{size:20})}),e.jsx("input",{value:c,onChange:o=>m(o.target.value),onKeyDown:o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),i())},placeholder:h?"Edit message...":s?"Type a message...":"Select a user to start chatting",className:"flex-1 bg-transparent border border-gray-700 rounded-md p-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--one)]"}),e.jsx("button",{onClick:i,disabled:!s&&!h||!c.trim(),className:"px-4 py-2 rounded-md bg-[var(--one)] text-black disabled:opacity-50",children:h?"Update":"Send"})]})]})};let pe;const oa=s=>(pe||(pe=Ke("http://localhost:5000",{auth:{token:s},withCredentials:!0})),pe),ia=()=>{const s=z(),{users:t,loading:a}=k(r=>r.user),{currentUser:n}=k(r=>r.auth),{unreadCounts:d}=k(r=>r.messages),[c,m]=x.useState(""),[h,g]=x.useState(null);x.useEffect(()=>{s(W())},[s]),x.useEffect(()=>{if(!n)return;const r=localStorage.getItem("token"),u=oa(r);return u.on("new_message",l=>{const b=l.sender?._id||l.sender;(l.receiver?._id||l.receiver)===n.id&&b!==h&&s(As(b))}),()=>{u.off("new_message")}},[n,h,s]);const p=x.useMemo(()=>(t||[]).filter(r=>r.role!=="Admin"&&r.role!=="Patient"),[t]),i=x.useMemo(()=>{const r=c.trim().toLowerCase();return r?p.filter(u=>(u.fullName||`${u.firstName||""} ${u.lastName||""}`).toLowerCase().includes(r)||(u.phone||u.phoneNumber||"").toLowerCase().includes(r)):p},[p,c]),o=x.useMemo(()=>i.find(r=>(r._id||r.id)===h)||p.find(r=>(r._id||r.id)===h),[i,p,h]);x.useEffect(()=>{!h&&i.length>0&&g(i[0]._id||i[0].id)},[i,h]);const j=r=>{g(r),s(Oe(r))};return e.jsxs("div",{className:"p-4 md:p-6 bg-[var(--six)] rounded-xl min-h-[70vh] grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"col-span-1 border border-[var(--two)] rounded-lg overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b border-[var(--two)] text-white flex items-center gap-2",children:[e.jsx(Fs,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold",children:"Inbox"})]}),e.jsx("div",{className:"p-3",children:e.jsx("input",{value:c,onChange:r=>m(r.target.value),placeholder:"Search patients...",className:"w-full bg-transparent border border-gray-700 rounded-md p-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--one)]"})}),e.jsxs("div",{className:"flex-1 overflow-y-auto divide-y divide-[var(--two)]",children:[a&&e.jsx("div",{className:"p-3 text-gray-300",children:"Loading..."}),!a&&i.map(r=>{const u=r._id||r.id,l=r.fullName||`${r.firstName||""} ${r.lastName||""}`,b=d[u]||0;return e.jsx("button",{onClick:()=>j(u),className:`w-full text-left p-3 hover:bg-[var(--five)] ${h===u?"bg-[var(--four)]":""}`,children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-[var(--one)] flex items-center justify-center text-black",children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:l}),e.jsx("div",{className:"text-xs text-gray-300 truncate",children:r.phone||r.phoneNumber||"No phone"})]}),b>0&&e.jsx("div",{className:"bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:b>9?"9+":b})]})},u)}),!a&&i.length===0&&e.jsx("div",{className:"p-3 text-gray-300",children:"No Patients Found"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 border border-[var(--four)] rounded-lg flex flex-col overflow-hidden bg-[var(--six)]",children:[e.jsxs("div",{className:"p-3 border-b border-[var(--four)] text-white flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold",children:o?o.fullName||`${o.firstName||""} ${o.lastName||""}`:"Select a User"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(la,{user:o})})]})]})},ca=()=>{const s=z(),{notifications:t,loading:a,error:n}=k(l=>l.notifications),[d,c]=x.useState(!1),[m,h]=x.useState(null),[g,p]=x.useState({title:"",message:"",type:"info"});x.useEffect(()=>{s(ue())},[s]);const i=async l=>{l.preventDefault(),m?await s(Ms({id:m,data:g})):await s(Is(g)),r(),s(ue())},o=l=>{p({title:l.title,message:l.message,type:l.type}),h(l._id),c(!0)},j=async l=>{window.confirm("Are you sure you want to delete this notification?")&&(await s(_s(l)),s(ue()))},r=()=>{p({title:"",message:"",type:"info"}),h(null),c(!1)},u=l=>{switch(l){case"alert":return"bg-red-500/20 text-red-400 border-red-500/50";case"announcement":return"bg-blue-500/20 text-blue-400 border-blue-500/50";case"info":default:return"bg-green-500/20 text-green-400 border-green-500/50"}};return e.jsxs("div",{className:"p-6 bg-[var(--six)] rounded-xl min-h-[70vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-6 w-6 text-[var(--one)]"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Notification Management"})]}),e.jsxs("button",{onClick:()=>c(!d),className:"flex items-center gap-2 px-4 py-2 bg-[var(--one)] text-black rounded-md hover:opacity-80",children:[d?e.jsx(ee,{size:20}):e.jsx(ht,{size:20}),d?"Cancel":"New Notification"]})]}),d&&e.jsxs("div",{className:"bg-[var(--five)] rounded-lg p-5 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:m?"Edit Notification":"Create New Notification"}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:g.title,onChange:l=>p({...g,title:l.target.value}),required:!0,className:"w-full bg-[var(--six)] border border-gray-700 rounded-md p-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--one)]",placeholder:"Enter notification title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message"}),e.jsx("textarea",{value:g.message,onChange:l=>p({...g,message:l.target.value}),required:!0,rows:4,className:"w-full bg-[var(--six)] border border-gray-700 rounded-md p-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--one)]",placeholder:"Enter notification message"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),e.jsxs("select",{value:g.type,onChange:l=>p({...g,type:l.target.value}),className:"w-full bg-[var(--six)] border border-gray-700 rounded-md p-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--one)]",children:[e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"announcement",children:"Announcement"}),e.jsx("option",{value:"alert",children:"Alert"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-[var(--one)] text-black rounded-md hover:opacity-80",children:m?"Update":"Create"}),e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Cancel"})]})]})]}),a&&e.jsx("div",{className:"text-center text-gray-300 py-8",children:"Loading notifications..."}),n&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-red-400",children:["Error: ",n]})}),e.jsxs("div",{className:"space-y-4",children:[!a&&t.map(l=>e.jsx("div",{className:`border rounded-lg p-4 ${u(l.type)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:l.title}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u(l.type)}`,children:l.type})]}),e.jsx("p",{className:"text-gray-300 mb-2",children:l.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[e.jsxs("span",{children:["Created: ",new Date(l.createdAt).toLocaleDateString()]}),l.createdBy&&e.jsxs("span",{children:["By: ",l.createdBy.fullName]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>o(l),className:"p-2 bg-blue-500/20 text-blue-400 rounded-md hover:bg-blue-500/30",title:"Edit",children:e.jsx(Ts,{size:16})}),e.jsx("button",{onClick:()=>j(l._id),className:"p-2 bg-red-500/20 text-red-400 rounded-md hover:bg-red-500/30",title:"Delete",children:e.jsx(De,{size:16})})]})]})},l._id)),!a&&t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{className:"h-16 w-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No Notifications"}),e.jsx("p",{className:"text-gray-500",children:"Create your first notification to get started."})]})]})]})},da=()=>{const s=z(),{users:t,loading:a}=k(h=>h.user),{appointments:n,loading:d}=k(h=>h.appointments);x.useEffect(()=>{s(W()),s(Be())},[s]);const c=x.useMemo(()=>{const h=[],g=new Date;for(let p=5;p>=0;p--){const i=Pt(g,p),o=Ut(i),j=Rt(i),r=U(o,"MMM yyyy"),u=t.filter(v=>{const y=new Date(v.createdAt);return le(y,{start:o,end:j})}),l=n.filter(v=>{const y=new Date(v.date);return le(y,{start:o,end:j})}),b=l.reduce((v,y)=>(v[y.status]=(v[y.status]||0)+1,v),{});h.push({name:r,users:u.length,appointments:l.length,completed:b.completed||0,pending:b.scheduled||0,cancelled:b.cancelled||0})}return h},[t,n]),m=x.useMemo(()=>{const h=new Date,g=new Date;return g.setDate(h.getDate()-7),We({start:g,end:h}).map(i=>{const o=U(i,"EEE, MMM d"),j=n.filter(r=>new Date(r.date).toDateString()===i.toDateString());return{name:o,appointments:j.length,completed:j.filter(r=>r.status==="completed").length}})},[n]);return a||d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Monthly Overview (Last 6 Months)"}),e.jsx("div",{className:"h-80",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(J,{data:c,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx(K,{}),e.jsx(L,{}),e.jsx($,{}),e.jsx(I,{dataKey:"appointments",name:"Appointments",fill:"#194e60"}),e.jsx(I,{dataKey:"users",name:"New Users",fill:"#82ca9d"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Appointment Status (This Month)"}),e.jsx("div",{className:"h-64",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(J,{data:[c[c.length-1]],children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx(K,{tickCount:1}),e.jsx(L,{}),e.jsx($,{}),e.jsx(I,{dataKey:"completed",name:"Completed",fill:"#00C49F"}),e.jsx(I,{dataKey:"pending",name:"Pending",fill:"#FFBB28"}),e.jsx(I,{dataKey:"cancelled",name:"cancelled",fill:"#FF8042"})]})})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity (Last 7 Days)"}),e.jsx("div",{className:"h-64",children:e.jsx(P,{width:"100%",height:"100%",children:e.jsxs(ze,{data:m,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(O,{dataKey:"name"}),e.jsx(K,{tickCount:1}),e.jsx(L,{}),e.jsx($,{}),e.jsx(re,{type:"monotone",dataKey:"appointments",name:"Appointments",stroke:"#194e60",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),e.jsx(re,{type:"monotone",dataKey:"completed",name:"Completed",stroke:"#00C49F",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})]})]})]})},Re=()=>{const{users:s}=k(d=>d.user),{currentUser:t}=k(d=>d.auth),{appointments:a}=k(d=>d.appointments);console.log(a);const n=[{title:"Total Users",value:s.length.toString(),icon:He,color:"bg-blue-500"},{title:"Appointments",value:a.length.toString(),icon:Rs,color:"bg-green-500"},{title:"Active Now",value:s.filter(d=>d.isActive===!0&&d.role!=="Patient"&&d._id!==t.id).length.toString(),icon:Es,color:"bg-orange-500"}];return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-[var(--six)]",children:"Dashboard Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(d=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:d.title}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:d.value})]}),e.jsx("div",{className:`${d.color} p-3 rounded-lg`,children:e.jsx(d.icon,{className:"text-white",size:24})})]})},d.title))}),e.jsx("div",{className:"mt-8 bg-[var(--six)] rounded-lg shadow p-6",children:e.jsx(da,{})})]})},ua=[{title:"Home",icon:zs},{title:"Inbox",icon:Gs},{title:"Users",icon:ae},{title:"Notifications",icon:be},{title:"Reports",icon:Hs},{title:"Settings",icon:qs}],xa=()=>{const[s,t]=x.useState("");return console.log(s),e.jsxs(Us,{children:[e.jsxs(Ps,{children:[e.jsx(Ls,{className:"bg-[var(--six)]",children:e.jsxs($s,{children:[e.jsx(Bs,{className:" text-[var(--two)] text-[19px] mb-10 font-bold",children:"Admin DASHBOARD"}),e.jsx(Os,{children:e.jsx(Ks,{children:ua.map(a=>e.jsx(Ws,{children:e.jsx(Vs,{asChild:!0,className:"hover:bg-[var(--three)] hover:text-[var(--six)]",children:e.jsxs("button",{onClick:()=>t(a.title),children:[e.jsx(a.icon,{className:"text-[var(--two)]"}),e.jsx("span",{className:"text-[var(--two)]  ",children:a.title})]})})},a.title))})})]})}),e.jsx(Ys,{})]}),e.jsxs("main",{className:"flex-1 p-4",children:[e.jsx(Xs,{}),s==="Home"?e.jsx(Re,{}):s==="Inbox"?e.jsx(ia,{}):s==="Users"?e.jsx(Mt,{}):s==="Notifications"?e.jsx(ca,{}):s==="Reports"?e.jsx(na,{}):s==="Settings"?e.jsx(Qs,{}):e.jsx(Re,{})]})]})},ya=()=>e.jsx("div",{children:e.jsx(xa,{})});export{ya as default};
